#!/usr/bin/env bash

# load env vars 
source .env && \
export ETHERSCAN_API_KEY=$ETH_ETHERSCAN_API_KEY


STRK_DST_ADDRESS=0x034501931e05c7934A0c6246fC7409CF9e650538F330A6B7a36f134c3B0577Ee
# SRC_TOKEN=0x03d3811Bc0AEAbcB9E5B94A7725B061153aF422b # MOST MOCK ERC20
SRC_TOKEN=0x0000000000000000000000000000000000000000 # Native ETH
SRC_AMOUNT=100000000000000
DST_TOKEN=0x049d36570d4e46f48e99674bd3fcc84644ddd6b96f7c741b1562b82f9e004dc7
DST_AMOUNT=90000000000000 
DST_CHAIN_ID=0x00000000000000000000000000000000000000000000534e5f5345504f4c4941
EXPIRY_WINDOW=10 # 10 seconds

# Native eth create order on Escrow
cast send \
  --rpc-url $ETH_SEPOLIA_RPC \
  --private-key $USR_SRC_PRIVATE_KEY \
  $ESCROW_ADDRESS \
  "createOrder(bytes32,address,uint256,bytes32,uint256,bytes32,uint256)" \
  $STRK_DST_ADDRESS \
  $SRC_TOKEN \
  $SRC_AMOUNT \
  $DST_TOKEN \
  $DST_AMOUNT \
  $DST_CHAIN_ID \
  $EXPIRY_WINDOW \
  --value $SRC_AMOUNT

# forge script script/escrow/create_order/CreateOrder.s.sol:CreateOrder \
#     --rpc-url $ETH_SEPOLIA_RPC \
#     --broadcast \
#     --private-key $USR_SRC_PRIVATE_KEY \
#     --value 1000000000000000 
