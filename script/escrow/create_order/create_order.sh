#!/usr/bin/env bash

# load env vars 
source .env && \
export ETHERSCAN_API_KEY=$ETH_ETHERSCAN_API_KEY


# STRK_DST_ADDRESS=0x034501931e05c7934A0c6246fC7409CF9e650538F330A6B7a36f134c3B0577Ee
DST_ADDRESS=0x000000000000000000000000e727dbadbb18c998e5dee2fae72cbcfff2e6d03d # me 
# SRC_TOKEN=0x03d3811Bc0AEAbcB9E5B94A7725B061153aF422b # MOST MOCK ERC20
SRC_TOKEN=0x0000000000000000000000000000000000000000 # Native ETH
# SRC_TOKEN=0xfFf9976782d46CC05630D1f6eBAb18b2324d6B14 # WETH
SRC_AMOUNT=1000000000000000  # 0.000001 ETH
DST_TOKEN=0x049d36570d4e46f48e99674bd3fcc84644ddd6b96f7c741b1562b82f9e004dc7
DST_AMOUNT=90000000000000 
DST_CHAIN_ID=0x00000000000000000000000000000000000000000000534e5f5345504f4c4941
EXPIRY_WINDOW=86400 #  1 day in seconds

# for a swap 
# Static swap values (for non-swap usage)
USE_SWAP=true
EXPECTED_OUT_TOKEN=0x1c7D4B196Cb0C7B01d743Fbc6116a902379C7238 # usdc sepolia 
HOOK_EXECUTOR_SALT=0x00000000000000000000000000000000000000000000000000000000000001a4

# Hook parameters
HOOK_TARGET=0x3A9D48AB9751398BbFa63ad67599Bb04e4BdF98b
HOOK_CALLDATA=0x3593564c000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000687803a100000000000000000000000000000000000000000000000000000000000000030006040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000180000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000002386f26fc10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000002bfff9976782d46cc05630d1f6ebab18b2324d6b140000641c7d4b196cb0c7b01d743fbc6116a902379c723800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000600000000000000000000000001c7d4b196cb0c7b01d743fbc6116a902379c7238000000000000000000000000e49acc3b16c097ec88dc9352ce4cd57ab7e35b95000000000000000000000000000000000000000000000000000000000000001900000000000000000000000000000000000000000000000000000000000000600000000000000000000000001c7d4b196cb0c7b01d743fbc6116a902379c72380000000000000000000000000f7a8cd029e284b04bed36a75ce4adc5068c374d00000000000000000000000000000000000000000000000000000000011b97e40c


# Native eth create order on Escrow
cast send \
  --rpc-url $ETH_SEPOLIA_RPC \
  --private-key $USR_SRC_PRIVATE_KEY \
  $ESCROW_ADDRESS \
  "createOrder(bytes32,address,uint256,bytes32,uint256,bytes32,uint256,bool,address,bytes32,(address,bytes)[])" \
  $DST_ADDRESS \
  $SRC_TOKEN \
  $SRC_AMOUNT \
  $DST_TOKEN \
  $DST_AMOUNT \
  $DST_CHAIN_ID \
  $EXPIRY_WINDOW \
  $USE_SWAP \
  $EXPECTED_OUT_TOKEN \
  $HOOK_EXECUTOR_SALT \
  "[($HOOK_TARGET,$HOOK_CALLDATA)]"
  # --value $SRC_AMOUNT \

# forge script script/escrow/create_order/CreateOrder.s.sol:CreateOrder \
#     --rpc-url $ETH_SEPOLIA_RPC \
#     --broadcast \
#     --private-key $USR_SRC_PRIVATE_KEY \
#     --value 1000000000000000 

